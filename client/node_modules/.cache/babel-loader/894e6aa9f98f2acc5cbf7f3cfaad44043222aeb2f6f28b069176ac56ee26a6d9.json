{"ast":null,"code":"var _jsxFileName = \"/Users/jack/image-generator/client/src/pages/Settings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './Settings.css';\nimport { useProfile } from '../context/ProfileContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Settings = () => {\n  _s();\n  const {\n    profilePicture,\n    setProfilePicture\n  } = useProfile();\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  // Fetch initial profile picture\n  useEffect(() => {\n    const fetchProfilePicture = async () => {\n      try {\n        const response = await fetch('http://localhost:3000/profile_picture', {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          if (data.profile_picture) {\n            // Make sure to access the correct field\n            setProfilePicture(`http://localhost:3000/${data.profile_picture}`);\n          }\n        } else {\n          throw new Error(`Failed to fetch: ${response.statusText}`);\n        }\n      } catch (error) {\n        console.error('Error fetching profile picture:', error);\n      }\n    };\n    fetchProfilePicture();\n  }, []);\n  const handleProfilePictureChange = async e => {\n    const file = e.target.files[0];\n    if (file) {\n      setLoading(true);\n      const formData = new FormData();\n      formData.append('profile_picture', file);\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n        const response = await fetch('http://localhost:3000/upload_profile_picture', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          body: formData\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setProfilePicture(`http://localhost:3000/${data.profilePicturePath}`);\n        setMessage('Profile picture updated successfully!');\n      } catch (error) {\n        console.error('Error:', error);\n        setMessage('Failed to update profile picture.');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    // Handle other form field submissions here if needed\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"settings-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settings-message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"settings-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-picture-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profilePicture,\n          alt: \"Profile\",\n          className: `profile-picture ${loading ? 'loading' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"profile-picture-input\",\n          accept: \"image/*\",\n          onChange: handleProfilePictureChange,\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"profile-picture-input\",\n          className: `profile-picture-label ${loading ? 'disabled' : ''}`,\n          children: loading ? 'Uploading...' : 'Change Profile Picture'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(Settings, \"rly5c9A8TqmgcJbLNUlozh+bc9M=\", false, function () {\n  return [useProfile];\n});\n_c = Settings;\nexport default Settings;\nvar _c;\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"names":["React","useState","useEffect","useProfile","jsxDEV","_jsxDEV","Settings","_s","profilePicture","setProfilePicture","loading","setLoading","message","setMessage","fetchProfilePicture","response","fetch","headers","localStorage","getItem","ok","data","json","profile_picture","Error","statusText","error","console","handleProfilePictureChange","e","file","target","files","formData","FormData","append","token","method","body","status","profilePicturePath","handleSubmit","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","name","src","alt","id","accept","onChange","disabled","htmlFor","_c","$RefreshReg$"],"sources":["/Users/jack/image-generator/client/src/pages/Settings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Settings.css';\nimport { useProfile } from '../context/ProfileContext';\n\nconst Settings = () => {\n    const { profilePicture, setProfilePicture } = useProfile();\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n\n    // Fetch initial profile picture\n    useEffect(() => {\n        const fetchProfilePicture = async () => {\n            try {\n                const response = await fetch('http://localhost:3000/profile_picture', {\n                    headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`\n                    }\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    if (data.profile_picture) { // Make sure to access the correct field\n                        setProfilePicture(`http://localhost:3000/${data.profile_picture}`);\n                    }\n                } else {\n                    throw new Error(`Failed to fetch: ${response.statusText}`);\n                }\n            } catch (error) {\n                console.error('Error fetching profile picture:', error);\n            }\n        };\n\n        fetchProfilePicture();\n    }, []);\n\n    const handleProfilePictureChange = async (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            setLoading(true);\n            const formData = new FormData();\n            formData.append('profile_picture', file);\n\n            try {\n                const token = localStorage.getItem('token');\n                if (!token) {\n                    throw new Error('No authentication token found');\n                }\n\n                const response = await fetch('http://localhost:3000/upload_profile_picture', {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': `Bearer ${token}`\n                    },\n                    body: formData\n                });\n\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n\n                const data = await response.json();\n                setProfilePicture(`http://localhost:3000/${data.profilePicturePath}`);\n                setMessage('Profile picture updated successfully!');\n            } catch (error) {\n                console.error('Error:', error);\n                setMessage('Failed to update profile picture.');\n            } finally {\n                setLoading(false);\n            }\n        }\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        // Handle other form field submissions here if needed\n    };\n\n    return (\n        <div className=\"settings-container\">\n            <h1>Settings</h1>\n            {message && <div className=\"settings-message\">{message}</div>}\n            <form className=\"settings-form\" onSubmit={handleSubmit}>\n                <label>\n                    Username:\n                    <input type=\"text\" name=\"username\" />\n                </label>\n                <label>\n                    Email:\n                    <input type=\"email\" name=\"email\" />\n                </label>\n                <label>\n                    Password:\n                    <input type=\"password\" name=\"password\" />\n                </label>\n                <div className=\"profile-picture-section\">\n                    <img \n                        src={profilePicture} \n                        alt=\"Profile\" \n                        className={`profile-picture ${loading ? 'loading' : ''}`} \n                    />\n                    <input \n                        type=\"file\" \n                        id=\"profile-picture-input\" \n                        accept=\"image/*\" \n                        onChange={handleProfilePictureChange}\n                        disabled={loading}\n                    />\n                    <label \n                        htmlFor=\"profile-picture-input\" \n                        className={`profile-picture-label ${loading ? 'disabled' : ''}`}\n                    >\n                        {loading ? 'Uploading...' : 'Change Profile Picture'}\n                    </label>\n                </div>\n                <button type=\"submit\" disabled={loading}>Save Changes</button>\n            </form>\n        </div>\n    );\n};\n\nexport default Settings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}